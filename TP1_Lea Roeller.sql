	/*
 *		TECH20712 -- Gestion des bases de données
 *					HEC Montréal
 *		Travail Pratique 1
 *		Instructions de remise : 
 *			-Où possible, répondez aux questions directement dans ce fichier SQL
 *			-Remettez également les modèles conceptuels et logiques en format PDF, en identifiant clairement la question.
 				-Les modèles se construisent avec Visio 2013. Vous avez accès au téléchargment de Visio 2013 via MSDNAA 
					et nous vous conseillons de l'utiliser. Vous pouvez aussi utiliser draw.io (https://www.draw.io/).
 *			-À remettre via ZoneCours dans l'outil de remise de travaux
 *			-Date de remise : voir ZoneCours, aucun retard permis
 *
 *		Correction : 
 *			-12.5% de la note finale
 *			-Une question qui génère une erreur se verra attribuer la note de 0 automatiquement
 */

  /*
	Question #1 :
		On vous demanade de modeliser la BD de la bibliothèque du quartier.
		Afin de démarrer le projet, vous vous rendez à une rencontre en fin de journée avec la directrice de l’établissement, 
		Mme Évelyne Pilon. Cette dernière entre tout de suite dans le vif du sujet. Voici votre conversation :

------------------------------
		Mme Pilon : Tel que mentionné au téléphone, nous souhaitons avoir une base de données pour la bibliothèque. 
					Comme vous vous en doutez, nous avons beaucoup d’ouvrages et aimerions conserver nos informations de façon centralisée.

		Vous :		Sans problème. Souhaitez-vous d’abord avoir les informations de la bibliothèque elle-même?
		
		Mme Pilon : Oui, c’est une bonne idée! Nous aurions besoin du nom de la bibliothèque, son année de création et l’arrondissement dans laquelle 
					elle se trouve. Il n’est pas nécessaire d’avoir l’adresse dans la base de données, cela ne nous sera pas utile.
					Nous souhaitons aussi avoir les informations des employés qui travaillent ici, c’est-à-dire leur nom et prénom, 
					numéro d’assurance sociale, date d’embauche et date de terminaison pour ceux qui quitteront. 
					Certains employés gèrent d’autres employés, il faudra donc savoir quel employé gère (manage) qui, 
					et qui est le gestionnaire (manager) de chaque employé.
		
		Vous :		Je vois ce que vous voulez dire. Et concernant les livres de votre bibliothèque, quelles sont les informations importantes à vos yeux?
		
		Mme Pilon : Notre bibliothèque contient de nombreux ouvrages. 
					Nous voudrons conserver pour chacun le titre, l’auteur, 
					la langue, la date d’achat par la bibliothèque et la catégorie à laquelle le livre appartient.
		
		Vous :		Que voulez-vous dire par catégorie?
		
		Mme Pilon : Par exemple fiction, science-fiction, bibliographie, langue étrangère, etc.
		
		Vous :		Je vois.
		
		Mme Pilon : Il sera aussi important de conserver l’information sur les auteurs. 
					On voudra leur nom et prénom, leur nationalité ainsi que leur langue d’écriture. 
					Ah, j’allais oublier le plus important! Nous voulons aussi les détails d’emprunt des livres, c’est-à-dire quel membre a emprunté 
					quel livre ainsi que la date de début et la date de fin de la location. 
					Parlant des membres, nous aurons besoin d’enregistrer pour chacun d’eux leur nom et prénom, 
					date de naissance, date d’adhésion ainsi que la date d’expiration de leur abonnement. 
					Je crois que c’est tout, du moins pour l’instant.
------------------------------		
		
		Votre tâche : En identifiant les besoins exprimés dans l’énoncé de la question et en détaillant explicitement vos suppositions :

		1.1	Développez le modèle conceptuel de la solution.
		1.2	Convertissez le modèle conceptuel en modèle logique.
		1.3 Créez la base de données que nous allons appeler BibliothequeMunicipale et créez les tables Employés et Bibliotheque avec tous leurs attributs


		*Note : vous n’avez pas à détailler votre démarche en modélisant le passage de 1NF en 2NF et en 3NF. Vos modèles doivent simplement respecter le 3NF.
*/

	DROP DATABASE IF EXISTS BibliothequeMunicipale;_
		CREATE DATABASE BibliothequeMunicipale;

		USE BibliothequeMunicipale
		GO

		DROP TABLE IF EXISTS Personne;_
		CREATE TABLE Personne_
		(_ PersonneID		INT	IDENTITY(1,1)	PRIMARY KEY,_ 
		Nom	NVARCHAR(100)	NOT NULL,_ 
		Prénom	NVARCHAR(100) 	NOT NULL_)_;

		DROP TABLE IF EXISTS Auteur;_
		CREATE TABLE Auteur
		(_ AuteurID	INT	IDENTITY(1,1)	PRIMARY KEY,_ 
		Nationalité	NVARCHAR(100)	NOT NULL_)_;

		DROP TABLE IF EXISTS Livre;_
		CREATE TABLE Livre
		(_ LivreID		INT	IDENTITY(1,1)	PRIMARY KEY,_ 
		Titre	NVARCHAR(100)	NOT NULL,_ 
		Catègorie NVARCHAR(100) 	NOT NULL_)_;

		DROP TABLE IF EXISTS LivreAuteur;_
		CREATE TABLE LivreAuteur
		(_ LivreAuteurID	INT	IDENTITY(1,1)	PRIMARY KEY,_
		AuteurID	INT NOT NULL	FOREIGN KEY REFERENCES Auteur(AuteurID),_
		LivreID 	INT	NOT NULL FOREIGN KEY REFERENCES Livre(LIVREID),
		Langueécriture NVARCHAR(100) NOT NULL _)_;

		DROP TABLE IF EXISTS Membre;_
		CREATE TABLE Membre
		(_ MembreID	INT	IDENTITY(1,1)	PRIMARY KEY,_
		datedenaissance	DATE NOT NULL	,_
		datedadhèsion	DATE	NOT NULL,
		datedexpiration DATE NOT NULL _)_;

		DROP TABLE IF EXISTS LivreMembre;_
		CREATE TABLE LivreMembre
		(_ LivreMembreID	INT	IDENTITY(1,1)	PRIMARY KEY,_
		MembreID	INT NOT NULL	FOREIGN KEY REFERENCES Membre(MembreID),_
		LivreID 	INT	NOT NULL FOREIGN KEY REFERENCES Livre(LIVREID),
		datedebut DATE NOT NULL,
		datedefin DATE NOT NULL_)_;

		DROP TABLE IF EXISTS Employe;_
		CREATE TABLE Employe_
		(_EmployeID	 INT	IDENTITY(1,1)	PRIMARY KEY,_ 
		numérodassurance		INT	NOT NULL,_ 
		datedembauche DATE	NOT NULL,_
		datedeterminisation DATE	NOT NULL,_ 
		Supervisor		INT	 	FOREIGN KEY REFERENCES Employe(EmployeID)_)_;

		DROP TABLE IF EXISTS Bibliothèque;
		CREATE TABLE Bibliothèque
		( BibliothèqueID INT IDENTITY(1,1)	PRIMARY KEY,
		nom NVARCHAR(100) NOT NULL,
		datedecréation DATE NOT NULL,
		arrondissement NVARCHAR(100) NOT NULL,
		Employé		INT	 NOT NULL	FOREIGN KEY REFERENCES Employe(EmployeID)_);

		DROP TABLE IF EXISTS BibliothèqueLivre;
		CREATE TABLE BibliothèqueLivre
		( BibliothèqueLivreID INT IDENTITY(1,1)	PRIMARY KEY,
		BibliothèqueID	INT NOT NULL	FOREIGN KEY REFERENCES Bibliothèque(BibliothèqueID),_
		LivreID 	INT	NOT NULL FOREIGN KEY REFERENCES Livre(LivreID),
		datedachat DATE NOT NULL,
		prixdachat INT NOT NULL);

/*
=>Question 2
		En plus de votre travail chez AdventureWorks, vous avez aussi offert de vous occuper bénévolement des la mise
		en place d'une base de données pour un site de vente de propriétés en ligne durant le weekend. Vous désirez donc 
		créer une base de données à partir de la liste de propriétés en vente afin de pouvoir plus facilement extraire 
		les données et enregistrer les informations dans le futur. Vous trouverez ci-dessous un extrait des données
		disponibles dans la méga-relation à l'heure actuelle.

		a) Convertissez donc la méga-relation ci-dessous dans un modèle en 1NF.
		b) Convertissez le modèle de 1NF à 2NF. 
		c) Convertissez le modèle de 2NF à 3NF.

		- Remettre le fichier contenant 1NF, 2NF, 3NF en format pdf, Word ou Excel sur 
		  ZoneCours (attention à ce que ce soit lisible).


		|TITRE DU LISTING		|TYPE DE PROPRIÉTÉ	|SOUS-TYPE DE PROPRIÉTÉ	|DATE MISE EN VENTE	|VENDEUR		|CONTACT DU VENDEUR				|LOCALISATION LISTIN	|
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	1.	|Condos Nordelec		|Copropriété		|Appartement			|2019-09-29			|John Doe		|514-888-7383					|Montréal, Québec		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	2.	|Manoir Westmount		|Unifamiliale		|Maison à étages		|2019-09-01			|Jeanne Diaz	|514-784-9301					|Westmount				|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	3.	|Les Lofts Corticelli	|Copropriété		|Loft/Studio			|2019-08-15			|Lionel Messi 	|lionel.messi@vendor.com		|Montréal, QC			|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	4.	|Condos Papineau		|Copropriété		|Appartement			|2019-09-21			|Bruce Lee		|b.l@vendor.com, 514-881-9350	|Montreal-Quebec		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	5.	|Ateliers Castelneau	|Copropriété		|Appartement			|2019-09-29			|Nicole Kidman	|n.k@vendor.com, 450-435-9104	|Montréal (Québec)		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	6.	|Joyau Ahuntsic			|Unifamiliale		|Maison de plain-pied	|2019-09-29			|Adriana Lima	|514-561-3207					|Montréal, Québec		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	7.	|Superbe Duplex			|À revenus			|Duplex					|2019-08-12			|Bruce Lee		|b.l@vendor.com, 514-881-9350	|Montreal-Quebec		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	8.	|Triplex Hochelaga		|À revenus			|Triplex				|2019-09-14			|John Doe		|514-888-7383					|Montréal, Québec		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	9.	|Superbe Duplex			|À revenus			|Duplex					|2019-08-31			|Nicole Kidman	|n.k@vendor.com, 450-435-9104	|Montréal (Québec)		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
	10.	|Quintuplex en bon état	|À revenus			|Quintuplex				|2019-08-28			|Bruce Lee		|b.l@vendor.com, 514-881-9350	|Montreal-Quebec		|						
		-----------------------------------------------------------------------------------------------------------------------------------------------------------------
*/
--CORRECTION Q2
	--1.0  : 1NF
	--1.0  : 2NF
	--1.0  : 3NF
	--TOTAL Q2: /3




